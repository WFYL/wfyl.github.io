# 自动Git提交推送脚本使用说明
# WFYL
# 2025/10/28 13:54:30
## 功能说明

这个脚本可以自动监控 `w:/java/SoftwareGraduationDesign/ACNiuOJ/uniapp` 目录的代码变化，并每50秒执行一次Git提交和推送操作。适用于开发过程中需要频繁备份代码的场景。

## 文件列表

- `auto_git_commit.ps1` - 主脚本文件
- `git_auto_commit.log` - 运行日志（自动生成）

## 使用方法

### 方法一：直接运行

1. 在Windows系统中，右键点击 `auto_git_commit.ps1` 文件
2. 选择 "使用PowerShell运行"

### 方法二：命令行运行

1. 打开PowerShell终端
2. 执行以下命令：

```powershell
# 进入脚本所在目录
cd w:/java/SoftwareGraduationDesign/ACNiuOJ

# 运行脚本
.\auto_git_commit.ps1
```

### 方法三：设置为后台服务运行（高级）

可以配合 `nssm` 等工具将脚本设置为Windows服务，实现系统启动时自动运行。

## 脚本特性

1. **自动检测修改**：只在检测到代码修改时才执行提交操作
2. **详细日志记录**：所有操作都会记录到日志文件中
3. **错误处理**：遇到错误不会中断脚本运行
4. **自动初始化**：如果目标目录不是Git仓库，会尝试初始化

## 注意事项

1. 确保目标目录 `w:/java/SoftwareGraduationDesign/ACNiuOJ/uniapp` 已正确配置Git远程仓库和凭据
2. 首次运行前，建议手动执行一次 `git push -u origin master`（或其他分支名）建立上游分支关联
3. 脚本默认提交消息格式为：`自动提交 - [时间戳]`
4. 脚本将在前台运行，关闭终端窗口会停止脚本
5. 按 `Ctrl+C` 可以手动停止脚本

## 配置修改

如果需要修改脚本配置，可以直接编辑 `auto_git_commit.ps1` 文件头部的配置变量：

```powershell
# 配置变量
$targetDir = "w:/java/SoftwareGraduationDesign/ACNiuOJ/uniapp"  # 目标目录
$intervalSeconds = 50  # 执行间隔（秒）
$logFile = "$PSScriptRoot/git_auto_commit.log"  # 日志文件路径
```

## 故障排除

1. **推送失败**：检查Git远程仓库配置和凭据是否正确
2. **权限问题**：以管理员身份运行PowerShell
3. **脚本无法运行**：执行 `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser` 允许执行本地脚本

## 日志查看

脚本运行日志保存在 `w:/java/SoftwareGraduationDesign/ACNiuOJ/git_auto_commit.log`，可以通过文本编辑器或以下命令查看：

```powershell
Get-Content -Path w:/java/SoftwareGraduationDesign/ACNiuOJ/git_auto_commit.log -Tail 100
```